# Kubernetes

## Issues

Fix permissions:

`kubectl create clusterrolebinding add-on-cluster-admin --clusterrole=cluster-admin --serviceaccount=kube-system:default`

## DNS

<service-name>.<namespace-name>.svc.cluster.local

## Primitives

### Names

Names are generally client-provided. Only one object of a given kind
can have a given name at a time (i.e., they are spatially unique). But
if you delete an object, you can make a new object with the same
name. Names are used to refer to an object in a resource URL, such as
/api/v1/pods/some-name. By convention, the names of Kubernetes
resources should be up to maximum length of 253 characters and consist
of lower case alphanumeric characters, -, and ., but certain resources
have more specific restrictions. See the identifiers design doc for
the precise syntax rules for names.

### UIDs

UIDs are generated by Kubernetes. Every object created over the whole
lifetime of a Kubernetes cluster has a distinct UID (i.e., they are
spatially and temporally unique).

### Namespaces

Kubernetes supports multiple virtual clusters backed by the same
physical cluster. These virtual clusters are called namespaces.

Namespaces are intended for use in environments with many users spread
across multiple teams, or projects. For clusters with a few to tens of
users, you should not need to create or think about namespaces at
all. Start using namespaces when you need the features they provide.

> Namespaces are a way to divide cluster resources between multiple
> users (via resource quota).

> Nodes and persistentVolumes, are not in any namespace!!!

> Events are an exception: they may or may not have a namespace,
> depending on the object the event is about.

### Labels

Labels are key/value pairs that are attached to objects.

Labels are intended to be used to specify identifying attributes of
objects that are meaningful and relevant to users, but do not directly
imply semantics to the core system.

Labels can be used to organize and to select subsets of objects.

Labels can be attached to objects at creation time and subsequently
added and modified at any time.

Each object can have a set of key/value labels defined.

Each Key must be unique for a given object.

```json
"labels": {
  "key1" : "value1",
  "key2" : "value2"
}
```

Labels enable users to map their own organizational structures onto
system objects in a loosely coupled fashion, without requiring clients
to store these mappings.

Service deployments and batch processing pipelines are often
multi-dimensional entities (e.g., multiple partitions or deployments,
multiple release tracks, multiple tiers, multiple micro-services per
tier). Management often requires cross-cutting operations, which
breaks encapsulation of strictly hierarchical representations,
especially rigid hierarchies determined by the infrastructure rather
than by users.

Example labels:

```
"release" : "stable", "release" : "canary"
"environment" : "dev", "environment" : "qa", "environment" : "production"
"tier" : "frontend", "tier" : "backend", "tier" : "cache"
"partition" : "customerA", "partition" : "customerB"
"track" : "daily", "track" : "weekly"
```
